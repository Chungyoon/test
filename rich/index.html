<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>

<title>UI5 Document</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<script id="sap-ui-bootstrap" src="/ui5/v1772/resources/sap-ui-core.js"
data-sap-ui-language="EN"
data-sap-ui-noDuplicateIds="false"
data-sap-ui-preload="sync"
data-sap-ui-compatVersion="edge"
data-sap-ui-theme="sap_fiori_3"
data-sap-ui-libs="sap.m"
data-sap-ui-noDuplicateIds="true">
</script>

<style>

html, body {
  height: 100%;
}
body {
margin: 0px;
}
</style>
<!--
<link href="jodit.css" rel="stylesheet">
<script src="jodit.min.js"></script>
-->

</head>
<body>
<div id="content"></div>

<script>

var u4a = {};
    u4a.m = {};

//Copyright 2017. INFOCG Inc. all rights reserved.

sap.ui.define("u4a.m.UsageArea", [
"sap/ui/core/Control",

], function(Control){
    "use strict";

    var oUsageArea = Control.extend("u4a.m.UsageArea", {
        metadata : {
            library : "u4a.m",
            properties : {
		  		width : { type : "sap.ui.core.CSSSize", defaultValue : "100%" },
		  		height : { type : "sap.ui.core.CSSSize", defaultValue : "100%" }
			},

            defaultAggregation : "contents",

            aggregations : {
              "contents" : { type : "sap.ui.core.Control", multiple : true, singularName: "content" },
            }

        }, // end of metadata

        renderer : function(oRm, oControl){

        	var aCont = oControl.getContents(),
        		iCnt = aCont.length;        		

            oRm.write("<div");
            oRm.writeControlData(oControl);
            oRm.addClass("u4aMUsageArea");
            oRm.addStyle("width", oControl.getWidth());
            oRm.addStyle("height", oControl.getHeight());
            oRm.writeStyles();
            oRm.writeClasses();
            oRm.write(">");

            for(var i = 0; i < iCnt; i++){
            	var oContent = aCont[i];
            	oRm.renderControl(oContent);
            }           

            oRm.write("</div>");

        }, // end of renderer

    });

    return oUsageArea;

});

jQuery.u4aJSloadAsync = function(url, callback) {
    jQuery.ajax({
      'url': url,
      'dataType': 'script',
      'cache': false,
      'async': false,
      'success': callback || jQuery.noop
    });
}


var oUsage,
	oApp = new sap.m.App(),
    oPage = new sap.m.Page();

    oApp.addPage(oPage);
    oApp.placeAt("content");

var oBtn1 = new sap.m.Button({ 
		text: "붙이기",
		press: fn_attach
	}),
	oBtn2 = new sap.m.Button({
		text: "제거",
		press: fn_del
	});
	
	oPage.addContent(oBtn1);
	oPage.addContent(oBtn2);
	
	setTimeout(function(){
	
		jQuery.sap.require("sap.ui.richtexteditor.RichTextEditor");
		
		var oRR = new sap.ui.richtexteditor.RichTextEditor({
			customToolbar: true,
			showGroupFont: true,
			showGroupInsert: true,
			showGroupLink: true,
			showGroupUndo: true,
			width: "100%"
		});
		
		oPage.addContent(oRR);

	},0);

function fn_attach(){
	
	if(oUsage){
		oPage.removeContent(oUsage);
		oUsage = null;
	}
	
	setTimeout(function(){
	
	jQuery.sap.require("sap.ui.richtexteditor.RichTextEditor");
	
	var oRich = new sap.ui.richtexteditor.RichTextEditor({
		customToolbar: true,
		showGroupFont: true,
		showGroupInsert: true,
		showGroupLink: true,
		showGroupUndo: true,
		useLegacyTheme: false,
		ready: function () {
			//this.addButtonGroup("styleselect").addButtonGroup("table");
		}		
	});
		
	oUsage = new u4a.m.UsageArea({
		content : [
			new sap.m.Page({
				content : [
					oRich
				]				
			})
		]
	});
	
	oUsage.addContent(new sap.m.Page({
		content : [
			oRich
		]
		
	}));
	
	oPage.addContent(oUsage);
	
	}, 0);
}

function fn_del(){
debugger;

}


</script>

</body>
</html>